<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>FareRule | gtfs-engine</title>

    <link rel="stylesheet" href="/gtfs-engine/stylesheets/styles.css">
    <link rel="stylesheet" href="/gtfs-engine/stylesheets/models.css">
    <link rel="stylesheet" href="/gtfs-engine/stylesheets/pygment_trac.css">
    <script src="/gtfs-engine/javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/gtfs-engine">gtfs-engine</a></h1>
        <p>A RESTful interface for GTFS data.</p>
        <p class="view"><a href="https://github.com/sangster/gtfs-engine">View the Project on GitHub <small>sangster/gtfs-engine</small></a></p>
        <ul>
          <li><a href="https://github.com/sangster/gtfs-engine/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/sangster/gtfs-engine/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/sangster/gtfs-engine">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>

<section>
<h2>FareRule</h2>
<blockquote class="subtitle">
<p class="subtitle">Rules for applying fare information for a transit organization&#8217;s routes.</p>
</blockquote>
<blockquote>
<p>The fare_rules table allows you to specify how fares in fare_attributes.txt apply to an itinerary. Most fare structures use some combination of the following rules:</p>
</blockquote>
<ul>
	<li>Fare depends on origin or destination stations.</li>
	<li>Fare depends on which zones the itinerary passes through.</li>
	<li>Fare depends on which route the itinerary uses.</li>
</ul>
<blockquote>
<p>For examples that demonstrate how to specify a fare structure with fare_rules.txt and fare_attributes.txt, see <a href="http://code.google.com/p/googletransitdatafeed/wiki/FareExamples">FareExamples</a> in the GoogleTransitDataFeed open source project wiki.</p>
</blockquote>
<h3>Fields</h3>
<h4>fare_id <span>(required; unique)</span></h4>
<blockquote>
<p>The <strong>fare_id</strong> field contains an ID that uniquely identifies a fare class. This value is referenced from the fare_attributes.txt file.</p>
</blockquote>
<h4>route_id</h4>
<blockquote>
<p>The <strong>route_id</strong> field associates the fare ID with a route. Route IDs are referenced from the routes.txt file. If you have several routes with the same fare attributes, create a row in fare_rules.txt for each route.</p>
</blockquote>
<blockquote>
<p>For example, if fare class &#8220;b&#8221; is valid on route &#8220;<span class="caps">TSW</span>&#8221; and &#8220;<span class="caps">TSE</span>&#8221;, the fare_rules.txt file would contain these rows for the fare class:</p>
</blockquote>
<pre>
b,TSW
b,TSE
</pre>
<h4>origin_id</h4>
<blockquote>
<p>The <strong>origin_id</strong> field associates the fare ID with an origin zone ID. Zone IDs are referenced from the stops.txt file. If you have several origin IDs with the same fare attributes, create a row in fare_rules.txt for each origin ID.</p>
</blockquote>
<blockquote>
<p>For example, if fare class &#8220;b&#8221; is valid for all travel originating from either zone &#8220;2&#8221; or zone &#8220;8&#8221;, the fare_rules.txt file would contain these rows for the fare class:</p>
</blockquote>
<pre>
b, , 2
b, , 8
</pre>
<h4>destination_id</h4>
<blockquote>
<p>The <strong>destination_id</strong> field associates the fare ID with a destination zone ID. Zone IDs are referenced from the stops.txt file. If you have several destination IDs with the same fare attributes, create a row in fare_rules.txt for each destination ID.</p>
</blockquote>
<blockquote>
<p>For example, you could use the origin_ID and destination_ID fields together to specify that fare class &#8220;b&#8221; is valid for travel between zones 3 and 4, and for travel between zones 3 and 5, the fare_rules.txt file would contain these rows for the fare class:</p>
</blockquote>
<pre>
b, , 3,4
b, , 3,5
</pre>
<h4>contains_id</h4>
<blockquote>
<p>The <strong>contains_id</strong> field associates the fare ID with a zone ID, referenced from the stops.txt file. The fare ID is then associated with itineraries that pass through every contains_id zone.</p>
</blockquote>
<blockquote>
<p>For example, if fare class &#8220;c&#8221; is associated with all travel on the <span class="caps">GRT</span> route that passes through zones 5, 6, and 7 the fare_rules.txt would contain these rows:</p>
</blockquote>
<pre>
c,GRT,,,5
c,GRT,,,6
c,GRT,,,7
</pre>
<blockquote>
<p>Because all contains_id zones must be matched for the fare to apply, an itinerary that passes through zones 5 and 6 but not zone 7 would not have fare class &#8220;c&#8221;. For more detail, see <a href="http://code.google.com/p/googletransitdatafeed/wiki/FareExamples">FareExamples</a> in the GoogleTransitDataFeed project wiki.</p>
</blockquote>
</section>

    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/sangster">sangster</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
      
        <div class="cite_google"><em>Portions of this page are modifications based on work created and <a href="https://developers.google.com/readme/policies/">shared by Google</a> and used according to terms described in the <a href="http://creativecommons.org/licenses/by/3.0">Creative Commons 3.0 Attribution License</a>.</em>

</div>
      
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
  </body>
</html>
